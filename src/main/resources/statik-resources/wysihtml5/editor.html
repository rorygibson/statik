<!DOCTYPE html SYSTEM "http://www.thymeleaf.org/dtd/xhtml1-strict-thymeleaf-3.dtd">
<html xmlns="http://www.w3c.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<body>

<div id="statik-editor-dialog" class="modal hide fade">
    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        <h3 th:text="#{edit}">Edit</h3>
    </div>

    <div class="modal-body">
        <form action="/statik/content" method="post" id="editorForm">
            <input th:value="#{editor.save}" class="btn btn-primary" type="submit" value="" id="submit" name="save"/>

            <select name="language-switcher" id="language-switcher">
                <option value="en">English</option>
                <option value="pt">Portuguese</option>
                <option value="fr">French</option>
                <option value="sp">Spanish</option>
            </select>

            <div id="textarea-preload"></div>
            <textarea name="content" id="wysihtml5-textarea" autofocus="autofocus"></textarea>
        </form>
    </div>
</div>

<script type="text/javascript">
    $(document).ready(function () {
        var txt = document.querySelector('#textarea-preload').innerHTML;
        document.querySelector('textarea').innerHTML = txt;


        $('#wysihtml5-textarea').wysihtml5({image:false});

        document.editor = $('#wysihtml5-textarea').data("wysihtml5").editor;

        $('#language-switcher').change(function(){
            $('input[name="language"]').val($(this).val());
            loadEditor(parent.window.statik.item, parent.window.statik.path, $(this).val());
        });

        $('#language-switcher').val($('input[name="language"]').val());

        $('#editorForm').ajaxForm(function () {
            window.location.reload();
        });

    });
</script>

</body>
</html>